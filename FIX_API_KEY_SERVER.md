# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "API key not configured on server"

## –ü—Ä–æ–±–ª–µ–º–∞

Next.js API route –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_API_KEY` –∏–ª–∏ `NEXT_PUBLIC_BOT_API_KEY`.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ù–∞–π–¥–∏—Ç–µ –∫–æ—Ä–µ–Ω—å Next.js –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –û–±—ã—á–Ω–æ —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
cd /var/www/backend
# –∏–ª–∏
cd /var/www/backend/backend
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ `.env.local`

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –∫–æ—Ä–Ω–µ Next.js –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è package.json)
pwd
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: /var/www/backend –∏–ª–∏ /var/www/backend/backend

# –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.local
nano .env.local
```

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```env
NEXT_PUBLIC_BOT_API_BASE=https://webhook.glco.us/api
NEXT_PUBLIC_BOT_API_KEY=<–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-–∫–ª—é—á>
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `NEXT_PUBLIC_BOT_API_KEY` (–Ω–µ `BOT_API_KEY`), —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω

```bash
cat .env.local
# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Next.js –ø—Ä–æ–µ–∫—Ç

```bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π build
rm -rf .next

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
npm run build
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Next.js

```bash
# –ï—Å–ª–∏ —á–µ—Ä–µ–∑ PM2
pm2 restart all --update-env

# –ò–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º
```

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
# –õ–æ–≥–∏ Next.js
pm2 logs --lines 50

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# [Oil Change API Route] Environment check:
#   NEXT_PUBLIC_BOT_API_KEY: SET (XX chars)
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ï—Å–ª–∏ `NEXT_PUBLIC_*` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

1. –í `.env.local` –¥–æ–±–∞–≤—å—Ç–µ:
```env
BOT_API_KEY=<–≤–∞—à-–∫–ª—é—á>
```

2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Next.js

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ:
- `https://glco.us/internal-driver-portal-7v92nx/oil-change`

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏ "API key not configured on server".
